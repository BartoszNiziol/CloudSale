<!--
 - Created by BRITENET on 03.05.2021.
 -->

<aura:component description="RC_ordersHistory" implements="forceCommunity:availableForAllPageTypes" access="global" controller="RC_OrderHistoryController">
   <aura:attribute type="list" name="orders" />
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:registerEvent type="c:ToastEvent" name="toastEvent"/>
    <c:RC_ToastDisplay />
<div style="background-color:white;">
    <aura:if isTrue="{!not(empty(v.orders))}">
        <lightning:accordion aura:id="accordion">
            <aura:iteration items="{!v.orders}" var="order">
<!--                <lightning:button label="click" onclick="{!c.showOrder}"/>-->
            <lightning:accordionSection name="{!order.Name}" label="{!order.Name}">
                <aura:set attribute="body">
                    <aura:iteration items="{!order.OrderItems}" var="orderItem">

                        <c:RC_orderHistoryItem price="{!orderItem.PricebookEntry.Product2.Price__c}"
                                               quantity="{!orderItem.Quantity}"
                                               productName="{!orderItem.PricebookEntry.Product2.Name}"
                                               recordId="{!orderItem.PricebookEntry.Product2.Id}"/>

                    </aura:iteration>
                    <div style="margin-left: 25%; color:black;">
                        Total Price: {!order.TotalAmount} â‚¬
                    </div>
                </aura:set>
            </lightning:accordionSection>
            </aura:iteration>
        </lightning:accordion>
    </aura:if>
</div>
</aura:component>
